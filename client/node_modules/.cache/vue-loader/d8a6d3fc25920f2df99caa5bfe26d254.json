{"remainingRequest":"/home/stylo/new-dir/starter-kit/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/stylo/new-dir/starter-kit/src/views/OSMasterTables.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/stylo/new-dir/starter-kit/src/views/OSMasterTables.vue","mtime":1606164517639},{"path":"/home/stylo/new-dir/starter-kit/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/stylo/new-dir/starter-kit/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/stylo/new-dir/starter-kit/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/stylo/new-dir/starter-kit/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios';\nimport PathMixins from '../mixins/pathMixins';\n\nexport default {\n  mixins: [PathMixins],\n  data() {\n    return {\n      activePrompt: false,\n      editPrompt: false,\n      tagSucc: false,\n      descriptionSucc: false,\n      idSucc: false,\n      response: [],\n      tech_id: [],\n      tech_map: {},\n      display_map: {},\n      addForm: {\n        id: null,\n        name: '',\n        tags: '',\n        description: '',\n      },\n      editForm: {\n        technology_id: null,\n        old_name: '',\n        name: '',\n        tags: '',\n        description: '',\n      },\n      tech: [],\n    };\n  },\n  computed:{\n    validAddPrompt(){\n      if(this.addForm.id != null) {\n        this.idSucc = true;\n      } else {\n        this.idSucc = false;\n      }\n      if(this.addForm.name.length > 0 && this.addForm.name.length < 50) {\n        this.nameSucc = true;\n      } else {\n        this.nameSucc = false;\n      }\n      if(this.isValidTag(this.addForm.tags) && this.addForm.tags.length < 2000) {\n        this.tagSucc = true;\n      } else {\n        this.tagSucc = false;\n      }\n      if(this.addForm.description.length > 0 && this.addForm.description.length < 500) {\n        this.descriptionSucc = true;\n      } else {\n        this.descriptionSucc = false;\n      }\n      if(this.descriptionSucc && this.nameSucc && this.tagSucc && this.idSucc) {\n        return true;\n      } else {\n        return false;\n      }\n    }, //eofunction\n  },\n  methods: {\n    isValidTag(tag) {\n      let re = new RegExp('(([\\#])([A-z])+(\\,)*)+');\n      if (tag === '') {\n        return false;\n      }\n      return re.test(tag);\n    },\n    getOS() {\n      const path = this.get_os_path;\n      axios.get(path)\n        .then((res) => {\n          this.response = res.data.data;\n\n          for (let i = 0; i < this.response.length; i += 1) {\n            this.response[i].technology_id = this.display_map[this.response[i].technology_id];\n          }\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n        });\n    },\n    addOS(payload) {\n      const path = this.add_os_path;\n      axios.post(path, payload)\n        .then((res) => {\n          this.response = res.data.data;\n          console.log(res.data.technology_id);\n          for (let i = 0; i < this.response.length; i += 1) {\n            this.response[i].technology_id = this.display_map[this.response[i].technology_id];\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n          this.getOS();\n        });\n    },\n    onSubmit() {\n\n      const payload = {\n        technology_id: this.tech_map[this.addForm.id],\n        OS_technology_name: this.addForm.name,\n        OS_tech_dependant_tags: this.addForm.tags,\n        OS_tech_description: this.addForm.description,\n      };\n      console.log(payload);\n      this.addOS(payload);\n    },\n    getTechId() {\n      this.tech_id = JSON.parse(localStorage.getItem('tech_response'));\n      let i;\n      for (i = 0; i < this.tech_id.length; i += 1) {\n        if (!this.tech.includes(this.tech_id[i].technology_id)) {\n          this.tech.push(this.tech_id[i].technology_name);\n          this.tech_map[this.tech_id[i].technology_name] = this.tech_id[i].technology_id;\n          this.display_map[this.tech_id[i].technology_id] = this.tech_id[i].technology_name;\n        }\n      }\n    },\n    editOS(entry) {\n      this.editPrompt = true;\n      this.editForm = entry;\n      this.editForm.old_name = entry.OS_technology_name;\n    },\n    onSubmitUpdate() {\n\n      const payload = {\n        technology_id: this.tech_map[this.editForm.technology_id],\n        OS_technology_name: this.editForm.old_name,\n        OS_tech_dependant_tags: this.editForm.tags,\n        OS_tech_description: this.editForm.description,\n        New_OS_name: this.editForm.name,\n      };\n      this.updateOS(payload);\n    },\n    // eslint-disable-next-line\n    updateOS(payload, os_name) {\n\n      const path = this.update_os_path; // eslint-disable-line\n      axios.put(path, payload)\n        .then((res) => {\n          this.response = res.data.data;\n\n          for (let i = 0; i < this.response.length; i += 1) {\n            this.response[i].technology_id = this.display_map[this.response[i].technology_id];\n          }\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n          this.getOS();\n        });\n    },\n    // eslint-disable-next-line\n    removeEntry(os_name_delete) {\n      const path = this.delete_os_path; // eslint-disable-line\n      const payload = { os_name: os_name_delete };\n      axios.put(path, payload)\n        .then((res) => {\n          this.response = res.data.data;\n\n          for (let i = 0; i < this.response.length; i += 1) {\n            this.response[i].technology_id = this.display_map[this.response[i].technology_id];\n          }\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n          this.getOS();\n        });\n    },\n    onDeleteEntry(entry) {\n      this.removeEntry(entry.OS_technology_name);\n    },\n  },\n  created() {\n    this.getTechId();\n    this.getOS();\n\n    console.log('Succesful.');\n  },\n};\n",{"version":3,"sources":["OSMasterTables.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"OSMasterTables.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n      <vs-button @click='activePrompt = true' color='primary' type='border'>\n        New\n      </vs-button>\n      <vs-table :data='response'>\n        <template slot='header'>\n        <h3>\n          OS Master\n        </h3>\n      </template>\n      <template slot ='thead'>\n        <vs-th>\n          Technology Name\n        </vs-th>\n        <vs-th>\n          Name\n        </vs-th>\n        <vs-th>\n          Tags\n        </vs-th>\n        <vs-th>\n          Description\n        </vs-th>\n        <vs-th>\n          Actions\n        </vs-th>\n      </template>\n\n      <template slot-scope='{data}'>\n        <vs-tr :key='index' v-for='(entry, index) in data'>\n          <vs-td :data='data[index].technology_id'>\n            {{data[index].technology_id}}\n          </vs-td>\n          <vs-td :data='data[index].OS_technology_name'>\n            {{data[index].OS_technology_name}}\n          </vs-td>\n          <vs-td :data='data[index].OS_tech_dependant_tags'>\n            {{data[index].OS_tech_dependant_tags}}\n          </vs-td>\n          <vs-td :data='data[index].OS_tech_description'>\n            {{data[index].OS_tech_description}}\n          </vs-td>\n          <vs-td>\n            <vs-button icon='edit' size='small' @click='editOS(data[index])'></vs-button>\n            <vs-button icon='delete' color='danger' size='small' @click='onDeleteEntry(data[index])'></vs-button>\n          </vs-td>\n\n        </vs-tr>\n      </template>\n      </vs-table>\n      <vs-prompt\n      title='New entry'\n      :active.sync='activePrompt'\n      :is-valid='validAddPrompt'\n      @accept='onSubmit'>\n        <vs-select\n          label='Technology Name'\n          v-model='addForm.id'>\n          <vs-select-item\n          :key='index'\n          :value='item'\n          :text='item'\n          v-for='item,index in tech' />\n        </vs-select>\n        <vs-input label='Name' placeholder ='Name' v-model='addForm.name'\n        :success='nameSucc' success-text='Valid name.'\n        :danger='!nameSucc' danger-text='Name must be nonempty and be no more than 50 characters.'/>\n        <vs-input label='Tags' placeholder ='Tags' v-model='addForm.tags'\n        :success='tagSucc' success-text='Valid tag.'\n        :danger='!tagSucc' danger-text='Tags must begin with a \"#\".'/>\n        <vs-input label='Description' placeholder ='Description' v-model='addForm.description'\n        :success='descriptionSucc' success-text='Valid description.'\n        :danger='!descriptionSucc' danger-text='Description must be nonempty and be no more than 500 characters.'/>\n      </vs-prompt>\n      <vs-prompt\n      title='Edit entry'\n      :active.sync='editPrompt'\n      @accept='onSubmitUpdate'>\n        <vs-select\n          label='Technology Name'\n          v-model='addForm.id'>\n          <vs-select-item\n          :key='index'\n          :value='item'\n          :text='item'\n          v-for='item,index in tech' />\n        </vs-select>\n        <vs-input label='Name' placeholder='Name' v-model='editForm.name'/>\n        <vs-input label='Tags' placeholder ='Tags' v-model='editForm.tags'/>\n        <vs-input label='Description' placeholder ='Description' v-model='editForm.description'/>\n      </vs-prompt>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport PathMixins from '../mixins/pathMixins';\n\nexport default {\n  mixins: [PathMixins],\n  data() {\n    return {\n      activePrompt: false,\n      editPrompt: false,\n      tagSucc: false,\n      descriptionSucc: false,\n      idSucc: false,\n      response: [],\n      tech_id: [],\n      tech_map: {},\n      display_map: {},\n      addForm: {\n        id: null,\n        name: '',\n        tags: '',\n        description: '',\n      },\n      editForm: {\n        technology_id: null,\n        old_name: '',\n        name: '',\n        tags: '',\n        description: '',\n      },\n      tech: [],\n    };\n  },\n  computed:{\n    validAddPrompt(){\n      if(this.addForm.id != null) {\n        this.idSucc = true;\n      } else {\n        this.idSucc = false;\n      }\n      if(this.addForm.name.length > 0 && this.addForm.name.length < 50) {\n        this.nameSucc = true;\n      } else {\n        this.nameSucc = false;\n      }\n      if(this.isValidTag(this.addForm.tags) && this.addForm.tags.length < 2000) {\n        this.tagSucc = true;\n      } else {\n        this.tagSucc = false;\n      }\n      if(this.addForm.description.length > 0 && this.addForm.description.length < 500) {\n        this.descriptionSucc = true;\n      } else {\n        this.descriptionSucc = false;\n      }\n      if(this.descriptionSucc && this.nameSucc && this.tagSucc && this.idSucc) {\n        return true;\n      } else {\n        return false;\n      }\n    }, //eofunction\n  },\n  methods: {\n    isValidTag(tag) {\n      let re = new RegExp('(([\\#])([A-z])+(\\,)*)+');\n      if (tag === '') {\n        return false;\n      }\n      return re.test(tag);\n    },\n    getOS() {\n      const path = this.get_os_path;\n      axios.get(path)\n        .then((res) => {\n          this.response = res.data.data;\n\n          for (let i = 0; i < this.response.length; i += 1) {\n            this.response[i].technology_id = this.display_map[this.response[i].technology_id];\n          }\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n        });\n    },\n    addOS(payload) {\n      const path = this.add_os_path;\n      axios.post(path, payload)\n        .then((res) => {\n          this.response = res.data.data;\n          console.log(res.data.technology_id);\n          for (let i = 0; i < this.response.length; i += 1) {\n            this.response[i].technology_id = this.display_map[this.response[i].technology_id];\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n          this.getOS();\n        });\n    },\n    onSubmit() {\n\n      const payload = {\n        technology_id: this.tech_map[this.addForm.id],\n        OS_technology_name: this.addForm.name,\n        OS_tech_dependant_tags: this.addForm.tags,\n        OS_tech_description: this.addForm.description,\n      };\n      console.log(payload);\n      this.addOS(payload);\n    },\n    getTechId() {\n      this.tech_id = JSON.parse(localStorage.getItem('tech_response'));\n      let i;\n      for (i = 0; i < this.tech_id.length; i += 1) {\n        if (!this.tech.includes(this.tech_id[i].technology_id)) {\n          this.tech.push(this.tech_id[i].technology_name);\n          this.tech_map[this.tech_id[i].technology_name] = this.tech_id[i].technology_id;\n          this.display_map[this.tech_id[i].technology_id] = this.tech_id[i].technology_name;\n        }\n      }\n    },\n    editOS(entry) {\n      this.editPrompt = true;\n      this.editForm = entry;\n      this.editForm.old_name = entry.OS_technology_name;\n    },\n    onSubmitUpdate() {\n\n      const payload = {\n        technology_id: this.tech_map[this.editForm.technology_id],\n        OS_technology_name: this.editForm.old_name,\n        OS_tech_dependant_tags: this.editForm.tags,\n        OS_tech_description: this.editForm.description,\n        New_OS_name: this.editForm.name,\n      };\n      this.updateOS(payload);\n    },\n    // eslint-disable-next-line\n    updateOS(payload, os_name) {\n\n      const path = this.update_os_path; // eslint-disable-line\n      axios.put(path, payload)\n        .then((res) => {\n          this.response = res.data.data;\n\n          for (let i = 0; i < this.response.length; i += 1) {\n            this.response[i].technology_id = this.display_map[this.response[i].technology_id];\n          }\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n          this.getOS();\n        });\n    },\n    // eslint-disable-next-line\n    removeEntry(os_name_delete) {\n      const path = this.delete_os_path; // eslint-disable-line\n      const payload = { os_name: os_name_delete };\n      axios.put(path, payload)\n        .then((res) => {\n          this.response = res.data.data;\n\n          for (let i = 0; i < this.response.length; i += 1) {\n            this.response[i].technology_id = this.display_map[this.response[i].technology_id];\n          }\n        })\n        .catch((error) => {\n          // eslint-disable-next-line\n          console.error(error);\n          this.getOS();\n        });\n    },\n    onDeleteEntry(entry) {\n      this.removeEntry(entry.OS_technology_name);\n    },\n  },\n  created() {\n    this.getTechId();\n    this.getOS();\n\n    console.log('Succesful.');\n  },\n};\n</script>\n"]}]}